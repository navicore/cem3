# Multi-line YAML Parser Test
#
# Tests parsing multi-line YAML documents.

include std:yaml

# Helper to create a newline string
: newline-str ( -- String )
  10 char->string
;

: main ( -- Int )
  "=== Multi-line YAML Tests ===" io.write-line

  # Test 1: Two key-value pairs
  "name: Alice" newline-str string.concat
  "age: 30" string.concat
  yaml-parse
  if
    "PASS 2-pair: " swap yaml-serialize string.concat io.write-line
  else
    drop "FAIL: 2-pair document" io.write-line
  then

  # Test 2: Three key-value pairs
  "name: Bob" newline-str string.concat
  "age: 25" string.concat newline-str string.concat
  "active: true" string.concat
  yaml-parse
  if
    "PASS 3-pair: " swap yaml-serialize string.concat io.write-line
  else
    drop "FAIL: 3-pair document" io.write-line
  then

  # Test 3: With blank lines
  "title: Hello" newline-str string.concat
  newline-str string.concat   # blank line
  "count: 42" string.concat
  yaml-parse
  if
    "PASS blank lines: " swap yaml-serialize string.concat io.write-line
  else
    drop "FAIL: blank lines" io.write-line
  then

  # Test 4: With comments
  "# This is a comment" newline-str string.concat
  "key: value" string.concat
  yaml-parse
  if
    "PASS comments: " swap yaml-serialize string.concat io.write-line
  else
    drop "FAIL: comments" io.write-line
  then

  "" io.write-line
  "Multi-line tests completed!" io.write-line
  0
;
