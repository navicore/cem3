# TCO Single Branch If Test
#
# This test verifies that single-branch if statements work correctly.
# Note: The tail call in the then-branch IS optimized, but the if-statement
# as a whole doesn't fully "terminate" because the else path falls through.

: single-branch-countdown ( Int -- Int )
    dup 0 > if
        1 subtract single-branch-countdown
    then
;

: main ( -- )
    "Testing single-branch if with tail call..." io.write-line
    100 single-branch-countdown
    int->string io.write-line
    "Success! Single branch if works (result should be 0)." io.write-line
;
