# Test string->int and int->string conversions

: test-int-to-string ( -- )
  42 int->string "42" string.equal? test.assert
  0 int->string "0" string.equal? test.assert
  0 1 i.subtract int->string "-1" string.equal? test.assert
;

: test-string-to-int-success ( -- )
  "42" string->int
  swap 42 i.= and test.assert

  "-7" string->int
  swap 0 7 i.subtract i.= and test.assert

  "  123  " string->int
  swap 123 i.= and test.assert

  "007" string->int
  swap 7 i.= and test.assert
;

: test-string-to-int-failure ( -- )
  # Invalid string returns (0, false)
  "not-a-number" string->int
  not nip test.assert

  # Empty string returns (0, false)
  "" string->int
  not nip test.assert
;

: test-roundtrip ( -- )
  # int -> string -> int should round-trip
  12345 int->string string->int
  swap 12345 i.= and test.assert
;
