# Test string->int and int->string conversions

: test-int-to-string ( -- )
  42 int->string "42" string.equal? test.assert
  0 int->string "0" string.equal? test.assert
  0 1 subtract int->string "-1" string.equal? test.assert
;

: test-string-to-int-success ( -- )
  "42" string->int
  swap 42 = and test.assert

  "-7" string->int
  swap 0 7 subtract = and test.assert

  "  123  " string->int
  swap 123 = and test.assert

  "007" string->int
  swap 7 = and test.assert
;

: test-string-to-int-failure ( -- )
  # Invalid string returns (0, false)
  "not-a-number" string->int
  not swap drop test.assert

  # Empty string returns (0, false)
  "" string->int
  not swap drop test.assert
;

: test-roundtrip ( -- )
  # int -> string -> int should round-trip
  12345 int->string string->int
  swap 12345 = and test.assert
;
