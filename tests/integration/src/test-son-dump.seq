# Tests for son.dump and son.dump-pretty

include std:son

# Test son.dump with integers
: test-son-dump-int ( -- )
  42 son.dump
  "42" string.equal? test.assert
;

# Test son.dump with negative integers
: test-son-dump-negative-int ( -- )
  -123 son.dump
  "-123" string.equal? test.assert
;

# Test son.dump with booleans
: test-son-dump-bool ( -- )
  true son.dump "true" string.equal? test.assert
  false son.dump "false" string.equal? test.assert
;

# Test son.dump with strings
: test-son-dump-string ( -- )
  "hello" son.dump
  "\"hello\"" string.equal? test.assert
;

# Test son.dump with symbols
: test-son-dump-symbol ( -- )
  :my-symbol son.dump
  ":my-symbol" string.equal? test.assert
;

# Test son.dump with empty list
: test-son-dump-empty-list ( -- )
  list-of son.dump
  "list-of" string.equal? test.assert
;

# Test son.dump with list
: test-son-dump-list ( -- )
  list-of 1 lv 2 lv 3 lv son.dump
  "list-of 1 lv 2 lv 3 lv" string.equal? test.assert
;

# Test son.dump with empty map
: test-son-dump-empty-map ( -- )
  map-of son.dump
  "map-of" string.equal? test.assert
;

# Test son.dump with map
: test-son-dump-map ( -- )
  map-of "key" 42 kv son.dump
  "map-of \"key\" 42 kv" string.equal? test.assert
;

# Test son.dump with variant
: test-son-dump-variant ( -- )
  :None wrap-0 son.dump
  ":None wrap-0" string.equal? test.assert
;

# Test son.dump-pretty with list
: test-son-dump-pretty-list ( -- )
  list-of 1 lv 2 lv son.dump-pretty
  # Check it contains newlines (pretty format)
  dup "\n" string.contains test.assert
  # Check it contains "list-of"
  dup "list-of" string.contains test.assert
  # Check it contains "lv"
  "lv" string.contains test.assert
;

# Test nested structure
: test-son-dump-nested ( -- )
  map-of "items" list-of 1 lv 2 lv kv son.dump
  "map-of \"items\" list-of 1 lv 2 lv kv" string.equal? test.assert
;
