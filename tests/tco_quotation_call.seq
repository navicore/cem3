# Quotation Call TCO Test (Phase 2)
#
# This test verifies that quotation calls in tail position get TCO.
# Without TCO, 100000 recursive quotation calls would overflow the stack.
# With Phase 2 TCO, quotations are called directly via musttail.

: recurse-via-quotation ( Int -- )
    dup 0 > if
        1 subtract [ recurse-via-quotation ] call
    else
        drop
    then
;

: main ( -- )
    "Testing quotation call TCO with 100000 recursive calls..." write_line
    100000 recurse-via-quotation
    "Success! Quotation call TCO is working." write_line
;
