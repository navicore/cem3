# Test symbol literals and conversion builtins

: test-symbol-literal ( -- )
  :hello symbol->string "hello" string.equal?
  test.assert
;

: test-symbol-with-hyphen ( -- )
  :hello-world symbol->string "hello-world" string.equal?
  test.assert
;

: test-string-to-symbol ( -- )
  "test" string->symbol symbol->string "test" string.equal?
  test.assert
;

: test-symbol-roundtrip ( -- )
  :my-symbol symbol->string string->symbol symbol->string
  "my-symbol" string.equal?
  test.assert
;

# Issue #166: Symbol interning - literal symbols should use O(1) equality

: test-literal-symbol-equality ( -- )
  # Two literal symbols with the same name should be equal (pointer comparison)
  :hello :hello symbol.=
  test.assert
;

: test-literal-symbol-inequality ( -- )
  # Different symbols should not be equal
  :hello :world symbol.= not
  test.assert
;

: test-runtime-symbol-equality ( -- )
  # Runtime-created symbols should still work with literal symbols
  "hello" string->symbol :hello symbol.=
  test.assert
;

: test-symbol-dedup ( -- )
  # Multiple uses of the same symbol literal should share storage
  # This tests that the compiler deduplicates symbol globals
  :foo :foo symbol.=
  :foo :foo symbol.=
  and test.assert
;
