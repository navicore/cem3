# Test pick operation - accessing arbitrary stack depths
#
# The pick operation copies a value from depth n to the top of stack:
# - pick(0) is equivalent to dup (copy top)
# - pick(1) is equivalent to over (copy second)
# - pick(2) copies third value
# - etc.
#
# Stack effect: ( ..stack n -- ..stack value )

: test-pick-0 ( -- )
  30 0 pick  # [30, 30] - pick(0) copies top like dup
  30 test.assert-eq
  30 test.assert-eq
;

: test-pick-1 ( -- )
  20 30 1 pick  # [20, 30, 20] - pick(1) copies second like over
  20 test.assert-eq
  30 test.assert-eq
  20 test.assert-eq
;

: test-pick-2 ( -- )
  10 20 30 2 pick  # [10, 20, 30, 10] - pick(2) copies third
  10 test.assert-eq
  30 test.assert-eq
  20 test.assert-eq
  10 test.assert-eq
;
